Основы
======

Просто напечатать "Привет, Мир!" недостаточно, верно? Вы хотите сделать больше 
-- вы хотите ввести что-то в программу, обработать и получить нечто на выходе. 
В Python это можно организовать при помощи констант и переменных, а также 
некоторыми другими способами, которые будут рассмотрены в этой главе.


Комментарии
-----------

*Комментарии* -- это то, что пишется после символа ``#``, и представляет интерес
лишь как заметка для читающего программу.

Например:

.. sourcecode:: python

  print('Привет, Мир!) # print -- это функция

или:

.. sourcecode:: python

  # print -- это функция
  print('Привет, Мир!)


Старайтесь в своих программах писать как можно больше полезных комментариев,
объясняющих:

* предположения;
* важные решения;
* важные детали;
* проблемы, которые вы пытаетесь решить;
* проблемы, которых вы пытаетесь избежать и т.д.

`Текст программы говорит о том, КАК, а комментарии должны объяснять, ПОЧЕМУ <http://www.codinghorror.com/blog/2006/12/code-tells-you-how-comments-tell-you-why.html>`_.

Это будет полезно для тех, кто будет читать вашу программу, так как им легче 
будет понять, что программа делает. Помните, что таким человеком можете 
оказаться вы сами через полгода!


Литеральные константы
---------------------

Примером литеральной константы может быть число, например, ``5``, ``1.23``, 
``9.25e-3`` или что-нибудь вроде ``'Это строка'`` или ``"It's a string!"``. Они 
называются литеральными, потому что они "буквальны"\ [1]_ -- вы используете их 
значение буквально. Число ``2`` всегда представляет само себя и ничего другого 
-- это "константа", потому что её значение нельзя изменить. Поэтому всё это 
называется литеральными константами.



Числа
-----

Числа в Python бывают трёх типов: целые, с плавающей точкой и комплексные.

* Примером целого числа может служить ``2``.
* Примерами чисел с плавающей точкой (или "плавающих" для краткости) могут быть 
  ``3.23`` и ``52.3E-4``. Обозначение ``E`` показывает степени числа 10. В 
  данном случае ``52.3E-4`` означает 52.3 * 10\ :superscript:`-4`.
* Примеры комплексных чисел: ``(-5+4j)`` и ``(2.3 - 4.6j)``

.. admonition:: Замечание для опытных программистов

    Нет отдельного типа 'long int' (длинное целое). Целые числа по умолчанию 
    могут быть произвольной длины.


Строки
------

Строка -- это *последовательность* *символов*. Чаще всего строки -- это просто 
некоторые наборы слов. 

Слова могут быть как на английском языке, так и на любом другом, поддерживаемом 
стандартом Unicode, что означает `почти на любом языке мира <http://www.unicode.org/cldr/data/charts/supplemental/languages_and_scripts.html>`_.

.. admonition:: Замечание для опытных программистов

  В Python 3 нет ASCII-строк, потому что Unicode является надмножеством 
  (включает в себя) ASCII. Если необходимо получить строку строго в кодировке 
  ASCII, используйте ``str.encode("ascii")``. Подробнее смотрите в 
  `обсуждении этого вопроса на StackOverflow <http://stackoverflow.com/questions/175240/how-do-i-convert-a-files-format-from-unicode-to-ascii-using-python#175270>`_.
  По умолчанию все строки в Unicode.

Я могу с уверенностью сказать, что вы будете использовать строки почти в каждой 
вашей программе на Python. Поэтому уделите внимание тому, как работать со 
строками в Python.


Одинарные кавычки
~~~~~~~~~~~~~~~~~

Строку можно указать, используя одинарные кавычки, как например, ``'Фраза 
в кавычках'``. Все пробелы и знаки табуляции сохранятся, как есть.


Двойные кавычки
~~~~~~~~~~~~~~~

Строки в двойных кавычках работают точно так же, как и в одинарных. Например, 
``"What's your name?"``.


.. _triple-quotes:

Тройные кавычки
~~~~~~~~~~~~~~~

Можно указывать "многострочные" строки с использованием тройных кавычек 
(``"""`` или ``'''``). В пределах тройных кавычек можно свободно использовать 
одинарные и двойные кавычки. Например:

.. sourcecode:: python

    '''Это многострочная строка. Это её первая строка.
    Это её вторая строка.
    "What's your name?", - спросил я.
    Он ответил: "Bond, James Bond."
    '''


Строки неизменяемы
~~~~~~~~~~~~~~~~~~

Это означает, что после создания строки её больше нельзя изменять. На первый 
взгляд это может показаться недостатком, но на самом деле это не так. 
Впоследствии на примере разных программ мы увидим, почему это не является 
ограничением.


Объединение строковых констант
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Если расположить рядом две строковых константы, Python автоматически их 
объединит. Например, ``'What\'s ' 'your name?'`` автоматически преобразуется в 
``"What's your name?"``.

.. admonition:: Замечание для программистов на C/C++

    В Python нет отдельного типа данных ``char`` (символ). В нём нет нужды, и я
    уверен, что вы не будете по нему скучать.

.. admonition:: Замечание для программистов на Perl/PHP

    Помните, что строки в двойных кавычках и в одинарных эквивалентны, и ничем 
    друг от друга не отличаются.



Метод format
~~~~~~~~~~~~

Иногда бывает нужно составить строку на основе каких-либо данных. Вот здесь-то 
и пригождается метод ``format()``.

Сохраните следующие строки в файл ``str_format.py``:

.. sourcecode:: python

    age = 26
    name = 'Swaroop'

    print('Возраст {0} -- {1} лет.'.format(name, age))
    print('Почему {0} забавляется с этим Python?'.format(name))

Вывод:

::

    $ python str_format.py
    Возраст Swaroop -- 26 лет.
    Почему Swaroop забавляется с этим Python?

**Как это работает:**

  В строку могут быть включены определённые обозначения, а впоследствии может 
  быть вызван метод ``format`` для замещения этих обозначений соответствующими 
  аргументами. 

  Взгляните на первый случай применения обозначений, где мы пишем ``{0}``, и это
  соответствует переменной ``name``, являющейся первым аргументом метода 
  ``format``. Аналогично, второе обозначение ``{1}`` соответствует переменной 
  ``age``, являющейся вторым аргументом метода ``format``. Заметьте, что Python
  начинает отсчёт с 0, поэтому первая позиция -- номер 0, вторая -- номер 1 и 
  т.д.

  Заметьте, мы ведь могли добиться того же самого результата и объединением 
  строк: ``'Возраст' + name + ' -- ' + str(age) + ' лет.'``, однако вы сами 
  видите, как это некрасиво, и как легко в таком случае допустить ошибку.
  Во-вторых, преобразование в строку делается методом ``format`` автоматически, 
  в отличие от явного преобразования в нашем примере. В-третьих, используя метод
  ``format``, мы можем изменить сообщение, не затрагивая используемых 
  переменных, и наоборот.

  На всякий случай имейте в виду, что цифры здесь не обязательны. Можно было бы
  просто написать:

  .. sourcecode:: python                                                          
  
    age = 26                                                                    
    name = 'Swaroop'                                                            

    print('Возраст {} -- {} лет.'.format(name, age))                          
    print('Почему {} забавляется с этим Python?'.format(name))

  и получить такой же результат, как и ранее.

В методе ``format`` Python помещает значение каждого аргумента в обозначенное 
место. Могут быть и более детальные обозначения, как то:

.. sourcecode:: python

    >>> '{0:.3}'.format(1/3) # десятичное число (.) с точностью в 3 знака для плавающих
    '0.333'
    >>> '{0:_^11}'.format('hello') # заполнить подчёркиваниями (_) с центровкой текста (^) по ширине 11
    '___hello___'
    >>> '{name} написал {book}'.format(name='Swaroop', book='A Byte of Python') # по ключевым словам
    'Swaroop написал A Byte of Python'

Детально такие обозначения форматов описаны в Предложении по расширению Python 
:pep:`3101`.


Переменные
----------

Использование одних лишь литеральных констант может скоро наскучить -- нам ведь 
нужен способ хранения любой информации и манипулирования ею. Вот здесь на сцену
выходят *переменные*. Слово "переменные" говорит само за себя -- их значение 
может меняться, а значит, вы можете хранить в переменной всё, что угодно.
Переменные -- это просто области памяти компьютера, в которых вы храните 
некоторую информацию. В отличие от констант, к такой информации нужно каким-то 
образом получать доступ, поэтому переменным даются имена.


Имена идентификаторов
---------------------

Переменные -- это частный случай идентификаторов. *Идентификаторы* -- это имена,
присвоенные *чему-то* для его обозначения. При выборе имён для идентификаторов 
необходимо соблюдать следующие правила:

* Первым символом идентификатора должна быть буква из алфавита (символ ASCII в 
  верхнем или нижнем регистре, или символ Unicode), а также символ подчёркивания
  ("_").
* Остальная часть идентификатора может состоять из букв (символы ASCII в верхнем
  или нижнем регистре, а также символы Unicode), знаков подчёркивания ("_") или 
  цифр (0-9).
* Имена идентификаторов чувствительны к регистру. Например, ``myname`` и 
  ``myName`` -- это **не** одно и то же. Обратите внимание на "``n``" в нижнем 
  регистре в первом случае и "``N``" в верхнем во втором.
* Примеры *допустимых* имён идентификаторов: ``i``, ``__my_name``, ``name_23``, 
  ``a1b2_c3`` и ``любые_символы_utf8_δξѪђёўЩӆΞέά``.
* Примеры *недопустимых* имён идентификаторов: ``2things``, ``здесь есть 
  пробелы``, ``my-name``, ``>a1b2_c3`` и ``"это_в_кавычках"``.


Типы данных
-----------

Переменные могут хранить значения разных типов, называемых **типами данных**. 
Основными типами являются числа и строки, о которых мы уже говорили. В 
дальнейших главах мы увидим, как создавать свои собственные типы при помощи 
:doc:`классов <object_oriented_programming>`.


Объекты
-------

Помните, Python рассматривает всё, что есть в программе, как *объекты*. 
Имеется в виду, в самом общем смысле. Вместо того, чтобы говорить "*нечто*", мы 
говорим "*объект*".

.. admonition:: Замечание для программистов в объектно-ориентированном стиле

    Python строго объектно ориентирован в том смысле, что объектом является всё,
    включая числа, строки и функции.

Сейчас мы увидим, как использовать переменные наряду с константами. Сохраните 
следующий пример и запустите программу.

.. admonition:: Как писать программы на Python

    Впредь стандартная процедура сохранения и запуска программы на Python будет 
    выглядеть так:

    1. Откройте ваш любимый редактор, например Komodo Edit.
    2. Введите текст программы из примера.
    3. Сохраните его в файл, указав его имя в комментарии. Я следую правилу 
       сохранять все программы на Python с расширением ``.py``.
    4. Запустите интерпретатор командой ``python3 program.py``. Кроме того, вы 
       можете сделать программу :ref:`исполнимой <first-executable>`, как 
       объяснялось ранее.


Пример: Использование переменных и констант
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. sourcecode:: python

    # Имя файла : var.py

    i = 5
    print(i)
    i = i + 1
    print(i)

    s = '''Это многострочная строка.
    Это вторая её строчка.'''
    print(s)


**Вывод:**

::

    $ python var.py
    5
    6
    Это многострочная строка.
    Это вторая её строчка.

**Как это работает:**

  Вот как эта программа работает. Сперва мы присваиваем значение константы 
  ``5`` переменной ``i``, используя оператор присваивания (``=``). Эта строка 
  называется предложением и указывает, что должно быть произведено некоторое 
  действие, и в данном случае мы связываем имя переменной ``i`` со значением 
  ``5``. Затем мы печатаем значение ``i``, используя функцию ``print``, которая 
  просто печатает значение переменной на экране.

  Далее мы добавляем ``1`` к значению, хранящемуся в ``i`` и сохраняем его там. 
  После этого мы печатаем его и получаем значение ``6``, что неудивительно.

  Аналогичным образом мы присваиваем строковую константу переменной ``s``, 
  после чего печатаем её.

.. admonition:: Замечание для программистов на статических языках 
  программирования

  Переменные используются простым присваиванием им значений. Никакого 
  предварительного объявления или определения типа данных не 
  требуется/применяется.



Логические и физические строки
------------------------------

Физическая строка -- это то, что вы *видите*, когда набираете программу. 
Логическая строка -- это то, что *Python видит* как единое предложение. 
Python неявно предполагает, что каждой *физической строке* соответствует 
*логическая строка*.

Примером логической строки может служить предложение ``print('Привет, Мир!')`` 
-- если оно на одной строке (как вы видите это в редакторе), то эта строка 
также соответствует физической строке.

Python неявно стимулирует использование по одному предложению на строку, что 
облегчает чтение кода.

Чтобы записать более одной логической строки на одной физической строке, вам 
придётся явно указать это при помощи точки с запятой (``;``), которая отмечает 
конец логической строки/предложения. Например,

.. sourcecode:: python

    i = 5
    print(i)

то же самое, что

.. sourcecode:: python

    i = 5;
    print(i);

и то же самое может быть записано в виде

.. sourcecode:: python

    i = 5; print(i);

или даже

.. sourcecode:: python

    i = 5; print(i)

Однако я **настоятельно рекомендую** вам придерживаться **написания одной 
логической строки в каждой физической строке**. Таким образом вы можете обойтись
совсем без точки с запятой. Кстати, я *никогда* не использовал и даже не 
встречал точки с запятой в программах на Python.

Можно использовать более одной физической строки для логической строки, но к 
этому следует прибегать лишь в случае очень длинных строк. Пример написания 
одной логической строки, занимающей несколько физических строк, приведён ниже. 
Это называется **явным объединением строк**.

.. sourcecode:: python

    s = 'Это строка. \
    Это строка продолжается.'
    print(s)

Это даст результат:

::

    Это строка. Это строка продолжается.

Аналогично,

.. sourcecode:: python

    print\
    (i)
 
то же самое, что и

.. sourcecode:: python

    print(i)

Иногда имеет место неявное подразумевание, когда использование обратной косой 
черты не обязательно. Это относится к случаям, когда в логической строке есть 
открывающаяся круглая, квадратная или фигурная скобка, но нет закрывающейся. 
Это называется **неявным объединением строк**. Вы сможете увидеть это в действии
в программах с использованием :ref:`списков <data-list>` в дальнейших главах.



Отступы
-------

В Python пробелы важны. Точнее, **пробелы в начале строки важны**. Это 
называется **отступами**. Передние отступы (пробелы и табуляции) в начале 
логической строки используются для определения уровня отступа логической строки,
который, в свою очередь, используется для группировки предложений.

Это означает, что предложения, идущие вместе, **должны** иметь одинаковый 
отступ. Каждый такой набор предложений называется **блоком**. В дальнейших 
главах мы увидим примеры того, насколько важны блоки.

Вы должны запомнить, что неправильные отступы могут приводить к возникновению 
ошибок. Например:

.. sourcecode:: python

    i = 5
     print('Значение составляет ', i) # Ошибка! Обратите внимание на первый пробел в начале строки
    print('Я повторяю, значение составляет ', i)


Когда вы запустите это, вы получите следующую ошибку:

::

    File "whitespace.py", line 4
      print('Значение составляет ', i) # Ошибка! Обратите внимание на первый пробел в начале строки
      ^
    IndentationError: unexpected indent

Обратите внимание на то, что в начале второй строки есть один пробел. Ошибка, 
отображённая Python, говорит нам о том, что синтаксис программы неверен, т.е. 
программа не была написана по правилам. Для вас же это означает, что *вы не 
можете начинать новые блоки предложений где попало* (кроме основного блока по 
умолчанию, который используется на протяжении всей программы, конечно). 
Случаи, в которых вы можете использовать новые блоки, будут подробно описаны в 
дальнейших главах, как например, в :doc:`главе "Поток команд" <control_flow>`.

.. admonition:: Как отступать

    **Не** смешивайте пробелы и символы табуляции в отступах, поскольку не на 
    всех платформах это работает корректно. Я *настоятельно рекомендую* вам 
    использовать *одиночную табуляцию* или *четыре пробела* для каждого 
    уровня отступа.
    
    Выберите какой-нибудь один из этих стилей отступа. Но что ещё более важно,
    это использовать выбранный стиль **постоянно**, а также соблюдать стиль 
    редактируемых вами файлов. Т.е. когда вы пишете новый файл, используйте 
    *только* один ваш любимый стиль, а если в редактируемом вами файле для 
    отступов уже используются, скажем, символы табуляции, то и вы используйте в 
    этом файле символы табуляции для отступов.
    
    Хорошие редакторы, такие как Komodo Edit, будут делать это автоматически.

.. admonition:: Замечание для программистов на статических языках 
  программирования

  Python всегда будет использовать отступы для выделения блоков и никогда не 
  будет использовать скобки. Введите ``from __future__ import braces``, чтобы 
  узнать больше.



Резюме
------

Теперь, когда мы прошли через множество жизненно важных мелочей, можно перейти 
к более интересным вещам -- таким как управляющие конструкции. Но сначала как 
следует освойтесь с прочитанным в настоящей главе.



Примечания
----------
.. [1] "literal" -- *англ.* "буквальный"; вспомните "литера" (*син.* "буква"). 
       (*прим. перев.*)

